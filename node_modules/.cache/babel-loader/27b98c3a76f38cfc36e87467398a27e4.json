{"ast":null,"code":"import _objectSpread from\"/home/nxtwave/react-hooks/sessions/making-api-call-with-hooks-part-2/node_modules/.pnpm/@babel/runtime@7.17.9/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/nxtwave/react-hooks/sessions/making-api-call-with-hooks-part-2/node_modules/.pnpm/@babel/runtime@7.17.9/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/nxtwave/react-hooks/sessions/making-api-call-with-hooks-part-2/node_modules/.pnpm/@babel/runtime@7.17.9/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/nxtwave/react-hooks/sessions/making-api-call-with-hooks-part-2/node_modules/.pnpm/@babel/runtime@7.17.9/node_modules/@babel/runtime/regenerator/index.js\";import{useState,useEffect}from'react';import Loader from'react-loader-spinner';import LeaderboardTable from'../LeaderboardTable';import{LeaderboardContainer,LoadingViewContainer,ErrorMessage}from'./styledComponents';import{jsx as _jsx}from\"react/jsx-runtime\";var apiStatusConstants={initial:'INITIAL',inProgress:'IN_PROGRESS',success:'SUCCESS',failure:'FAILURE'};var Leaderboard=function Leaderboard(){var _useState=useState({status:apiStatusConstants.initial,data:null,errorMsg:null}),_useState2=_slicedToArray(_useState,2),apiResponse=_useState2[0],setApiResponse=_useState2[1];useEffect(function(){var getLeaderboardData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,options,response,responseData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setApiResponse({status:apiStatusConstants.inProgress,data:null,errorMsg:null});url='https://apis.ccbp.in/leaderboard';options={method:'GET',headers:{Authorization:'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InJhaHVsIiwicm9sZSI6IlBSSU1FX1VTRVIiLCJpYXQiOjE2MjMwNjU1MzJ9.D13s5wN3Oh59aa_qtXMo3Ec4wojOx0EZh8Xr5C5sRkU'}};_context.next=5;return fetch(url,options);case 5:response=_context.sent;_context.next=8;return response.json();case 8:responseData=_context.sent;if(response.ok){setApiResponse(function(prevApiResponse){return _objectSpread(_objectSpread({},prevApiResponse),{},{status:apiStatusConstants.success,data:responseData});});}else{setApiResponse(function(prevApiResponse){return _objectSpread(_objectSpread({},prevApiResponse),{},{status:apiStatusConstants.failure,errorMsg:responseData.error_msg});});}case 10:case\"end\":return _context.stop();}}},_callee);}));return function getLeaderboardData(){return _ref.apply(this,arguments);};}();getLeaderboardData();},[]);var renderFailureView=function renderFailureView(){var errorMsg=apiResponse.errorMsg;return/*#__PURE__*/_jsx(ErrorMessage,{children:errorMsg});};var renderSuccessView=function renderSuccessView(){var data=apiResponse.data;var formattedLeaderboardData=data.leaderboard_data.map(function(eachUser){return{id:eachUser.id,rank:eachUser.rank,name:eachUser.name,profileImgUrl:eachUser.profile_image_url,score:eachUser.score,language:eachUser.language,timeSpent:eachUser.time_spent};});return/*#__PURE__*/_jsx(LeaderboardTable,{leaderboardData:formattedLeaderboardData});};var renderLoadingView=function renderLoadingView(){return/*#__PURE__*/_jsx(LoadingViewContainer,{children:/*#__PURE__*/_jsx(Loader,{type:\"ThreeDots\",color:\"#ffffff\",height:\"50\",width:\"50\"})});};var renderLeaderboard=function renderLeaderboard(){var status=apiResponse.status;switch(status){case apiStatusConstants.inProgress:return renderLoadingView();case apiStatusConstants.success:return renderSuccessView();case apiStatusConstants.failure:return renderFailureView();default:return null;}};return/*#__PURE__*/_jsx(LeaderboardContainer,{children:renderLeaderboard()});};export default Leaderboard;","map":{"version":3,"names":["useState","useEffect","Loader","LeaderboardTable","LeaderboardContainer","LoadingViewContainer","ErrorMessage","apiStatusConstants","initial","inProgress","success","failure","Leaderboard","status","data","errorMsg","apiResponse","setApiResponse","getLeaderboardData","url","options","method","headers","Authorization","fetch","response","json","responseData","ok","prevApiResponse","error_msg","renderFailureView","renderSuccessView","formattedLeaderboardData","leaderboard_data","map","eachUser","id","rank","name","profileImgUrl","profile_image_url","score","language","timeSpent","time_spent","renderLoadingView","renderLeaderboard"],"sources":["/home/nxtwave/react-hooks/sessions/making-api-call-with-hooks-part-2/src/components/Leaderboard/index.js"],"sourcesContent":["import {useState, useEffect} from 'react'\nimport Loader from 'react-loader-spinner'\nimport LeaderboardTable from '../LeaderboardTable'\n\nimport {\n  LeaderboardContainer,\n  LoadingViewContainer,\n  ErrorMessage,\n} from './styledComponents'\n\nconst apiStatusConstants = {\n  initial: 'INITIAL',\n  inProgress: 'IN_PROGRESS',\n  success: 'SUCCESS',\n  failure: 'FAILURE',\n}\n\nconst Leaderboard = () => {\n  const [apiResponse, setApiResponse] = useState({\n    status: apiStatusConstants.initial,\n    data: null,\n    errorMsg: null,\n  })\n\n  useEffect(() => {\n    const getLeaderboardData = async () => {\n      setApiResponse({\n        status: apiStatusConstants.inProgress,\n        data: null,\n        errorMsg: null,\n      })\n\n      const url = 'https://apis.ccbp.in/leaderboard'\n      const options = {\n        method: 'GET',\n        headers: {\n          Authorization:\n            'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InJhaHVsIiwicm9sZSI6IlBSSU1FX1VTRVIiLCJpYXQiOjE2MjMwNjU1MzJ9.D13s5wN3Oh59aa_qtXMo3Ec4wojOx0EZh8Xr5C5sRkU',\n        },\n      }\n      const response = await fetch(url, options)\n      const responseData = await response.json()\n      if (response.ok) {\n        setApiResponse(prevApiResponse => ({\n          ...prevApiResponse,\n          status: apiStatusConstants.success,\n          data: responseData,\n        }))\n      } else {\n        setApiResponse(prevApiResponse => ({\n          ...prevApiResponse,\n          status: apiStatusConstants.failure,\n          errorMsg: responseData.error_msg,\n        }))\n      }\n    }\n\n    getLeaderboardData()\n  }, [])\n\n  const renderFailureView = () => {\n    const {errorMsg} = apiResponse\n    return <ErrorMessage>{errorMsg}</ErrorMessage>\n  }\n\n  const renderSuccessView = () => {\n    const {data} = apiResponse\n    const formattedLeaderboardData = data.leaderboard_data.map(eachUser => ({\n      id: eachUser.id,\n      rank: eachUser.rank,\n      name: eachUser.name,\n      profileImgUrl: eachUser.profile_image_url,\n      score: eachUser.score,\n      language: eachUser.language,\n      timeSpent: eachUser.time_spent,\n    }))\n    return <LeaderboardTable leaderboardData={formattedLeaderboardData} />\n  }\n\n  const renderLoadingView = () => (\n    <LoadingViewContainer>\n      <Loader type='ThreeDots' color='#ffffff' height='50' width='50' />\n    </LoadingViewContainer>\n  )\n\n  const renderLeaderboard = () => {\n    const {status} = apiResponse\n\n    switch (status) {\n      case apiStatusConstants.inProgress:\n        return renderLoadingView()\n      case apiStatusConstants.success:\n        return renderSuccessView()\n      case apiStatusConstants.failure:\n        return renderFailureView()\n      default:\n        return null\n    }\n  }\n\n  return <LeaderboardContainer>{renderLeaderboard()}</LeaderboardContainer>\n}\n\nexport default Leaderboard\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}